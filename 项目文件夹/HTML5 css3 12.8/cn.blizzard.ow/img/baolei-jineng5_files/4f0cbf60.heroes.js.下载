var Heroes={init:function(){this.getMoreMedia()},getMoreMedia:function(){var a=$(".media-gallery li").length,b=Math.ceil(a/4),c=$("a[data-load-more-media]");b>1&&($("#load-more-media").removeClass("hide-load-btn"),c.click(function(){$(".hero-media").removeClass("is-partial"),$(this).remove()}))},setVideo:function(){var a=[],b=[],c=$(".video-wrap > a").data();c.title=$(".m-detail h2").text(),c.width="100%",c.height="100%",a.push(c);var d=$(".m-abilities > a");d.each(function(a,c){var d={};d.video=$(c).data("video"),d.flv=$(c).data("flv"),d.info=$(c).next().text(),d.width="100%",d.height="100%",b.push(d)}),new JV.popSlider(".video-wrap",{data:a}),new JV.popSlider(".section2 .w-video-style",{data:b})},setParallax:function(){var a=$(".m-heroes-show"),b=$(".heroes",a).length,c=$(window).width(),d=650,e=3*c/b,f=d-(d-e);$(".heroes",a).each(function(a,b){$(b).css("margin-left",f*a+"px")}),a.parallax({calibrateX:!1,calibrateY:!0,invertX:!0,invertY:!0,limitX:920,limitY:5,scalarX:1,scalarY:.75,frictionX:.1,frictionY:.1}),$("#side-menu li").click(function(){var a=$(this),b=a.attr("rel");a.hasClass("active")||("list"==b?($(".m-heroes-list").show(),$(".m-heroes-show").hide()):($(".m-heroes-list").hide(),$(".m-heroes-show").show()))})},setTopVideo:function(){var a,b=$("#j-video");if(Modernizr.video){var c={url:b.data("video"),width:"100%",height:"100%"};a='<video width="'+c.width+'" height="'+c.height+'" autoplay="true" loop preload="auto" poster=""><source src="'+c.url+'" type="video/mp4"> 您的浏览器暂时无法播放此视频.</video>'}b.html(a)},setScrollTo:function(){$(".u-heroes-arrow-down").click(function(){$("body,html").stop(!0,!1).animate({scrollTop:$("#section2").offset().top},500,"easeOutQuad")})},setHeroesData:function(){var a=$("body").data("name");$.get("/js/data/heroes_data.json",function(b){var c,d,e=b.heroes_list,f=e.length,g=_.findLastIndex(e,{enName:a});c=g==f-1?0:g+1,d=0==g?f-1:g-1;var h="https://overwatch.nosdn.127.net/1/images/heroes/detail/head/",i=$(".w-heroes-arrow-l"),j=$(".w-heroes-arrow-r"),k=$(".w-heroes-arrow-l .head img"),l=$(".w-heroes-arrow-l .head .name"),m=$(".w-heroes-arrow-r .head img"),n=$(".w-heroes-arrow-r .head .name"),o=$(".m-heroes-bottom .prev"),p=$(".m-heroes-bottom .next"),q=$(".m-heroes-bottom .prev .head"),r=$(".m-heroes-bottom .prev .name"),s=$(".m-heroes-bottom .next .head"),t=$(".m-heroes-bottom .next .name");i.attr("href",e[d].enName.toLowerCase()),j.attr("href",e[c].enName.toLowerCase()),o.attr("href",e[d].enName.toLowerCase()),p.attr("href",e[c].enName.toLowerCase()),k.attr("src",h+e[d].enName+".png"),l.text(e[d].cnName),m.attr("src",h+e[c].enName+".png"),n.text(e[c].cnName),q.css("background-image","url("+h+e[d].enName+".png)"),s.css("background-image","url("+h+e[c].enName+".png)"),r.text(e[d].cnName),t.text(e[c].cnName)},"json")},setSideMenu:function(){function a(){c=$(window).scrollTop(),b(c<d.eq(1).offset().top?0:c<d.eq(2).offset().top?1:2)}function b(a){e.eq(a).addClass("active").siblings().removeClass("active")}var c=0,d=$("section"),e=$(".side-menu li");a(),$(window).scroll(function(){setTimeout(function(){a()},500)}),e.click(function(){var a=$(this).find("a").attr("href"),b=$(a).offset().top;return e.removeClass("active"),$(this).addClass("active"),$("body,html").stop(!0,!1).animate({scrollTop:b},500,"easeOutQuad"),!1})},setSharePic:function(){window.jiathis_config={summary:"《守望先锋》是暴雪出品的首款团队射击游戏，现已正式来到中国。游戏以近未来地球为背景，来自全球的超级英雄们将使用自己独特的能力在战场上厮杀，带给玩家顶尖的射击体验。",pic:$("#section1").attr("data-pic"),title:""}}};